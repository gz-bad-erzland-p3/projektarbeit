{"version":3,"file":"stackTrace.esm.js","sources":["../../../../../packages/core/src/devtools/react-render-tracker/stackTrace.ts"],"sourcesContent":["// TODO: duplicated from https://github.com/lahmatiy/react-render-tracker/blob/main/src/publisher/react-integration/utils/stackTrace.ts\n// once it is published as a standalone npm package, remove this file\n\n// Adopted version of StackTrace-Parser\n// https://github.com/errwischt/stacktrace-parser/blob/master/src/stack-trace-parser.js\n\nconst UNKNOWN_FUNCTION = '<unknown>';\n\ntype LineParseResult = null | {\n  name: string;\n  loc: string | null;\n};\n\nexport function parseStackTraceLine(line: string): LineParseResult {\n  return parseChrome(line) || parseGecko(line) || parseJSC(line);\n}\n\nconst chromeRe =\n  /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\/|[a-z]:\\\\|\\\\\\\\).*?)?\\)?\\s*$/i;\nconst chromeRe2 =\n  /^\\s*at ()((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\/|[a-z]:\\\\|\\\\\\\\).*?)\\s*$/i;\nconst chromeEvalRe = /\\((\\S*)\\)/;\n\nfunction parseChrome(line: string): LineParseResult {\n  const parts = chromeRe.exec(line) || chromeRe2.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  let loc = parts[2];\n  const isNative = loc && loc.indexOf('native') === 0; // start of line\n  const isEval = loc && loc.indexOf('eval') === 0; // start of line\n\n  const submatch = chromeEvalRe.exec(loc);\n  if (isEval && submatch != null) {\n    // throw out eval line/column and use top-most line/column number\n    loc = submatch[1]; // url\n  }\n\n  return {\n    loc: !isNative ? parts[2] : null,\n    name: parts[1] || UNKNOWN_FUNCTION,\n  };\n}\n\nconst geckoRe =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\\[native).*?|[^@]*bundle)\\s*$/i;\nconst geckoEvalRe = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\n\nfunction parseGecko(line: string): LineParseResult {\n  const parts = geckoRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  let loc = parts[3];\n  const isEval = loc && loc.indexOf(' > eval') > -1;\n\n  const submatch = geckoEvalRe.exec(loc);\n  if (isEval && submatch != null) {\n    // throw out eval line/column and use top-most line number\n    loc = submatch[1];\n  }\n\n  return {\n    loc: parts[3],\n    name: parts[1] || UNKNOWN_FUNCTION,\n  };\n}\n\nconst javaScriptCoreRe = /^\\s*(?:([^@]*)(?:\\((.*?)\\))?@)?(\\S.*?)\\s*$/i;\n\nfunction parseJSC(line: string): LineParseResult {\n  const parts = javaScriptCoreRe.exec(line);\n\n  if (!parts) {\n    return null;\n  }\n\n  return {\n    loc: parts[3],\n    name: parts[1] || UNKNOWN_FUNCTION,\n  };\n}\n"],"names":["UNKNOWN_FUNCTION","parseStackTraceLine","line","parseChrome","parseGecko","parseJSC","chromeRe","chromeRe2","chromeEvalRe","parts","exec","loc","isNative","indexOf","isEval","submatch","name","geckoRe","geckoEvalRe","javaScriptCoreRe"],"mappings":"AAAA;AACA;AAEA;AACA;AAEA,MAAMA,gBAAgB,GAAG,WAAzB;SAOgBC,oBAAoBC;EAClC,OAAOC,WAAW,CAACD,IAAD,CAAX,IAAqBE,UAAU,CAACF,IAAD,CAA/B,IAAyCG,QAAQ,CAACH,IAAD,CAAxD;AACD;AAED,MAAMI,QAAQ,GACZ,sHADF;AAEA,MAAMC,SAAS,GACb,2GADF;AAEA,MAAMC,YAAY,GAAG,WAArB;;AAEA,SAASL,WAAT,CAAqBD,IAArB;EACE,MAAMO,KAAK,GAAGH,QAAQ,CAACI,IAAT,CAAcR,IAAd,KAAuBK,SAAS,CAACG,IAAV,CAAeR,IAAf,CAArC;;EAEA,IAAI,CAACO,KAAL,EAAY;IACV,OAAO,IAAP;;;EAGF,IAAIE,GAAG,GAAGF,KAAK,CAAC,CAAD,CAAf;EACA,MAAMG,QAAQ,GAAGD,GAAG,IAAIA,GAAG,CAACE,OAAJ,CAAY,QAAZ,MAA0B,CAAlD;;EACA,MAAMC,MAAM,GAAGH,GAAG,IAAIA,GAAG,CAACE,OAAJ,CAAY,MAAZ,MAAwB,CAA9C;;EAEA,MAAME,QAAQ,GAAGP,YAAY,CAACE,IAAb,CAAkBC,GAAlB,CAAjB;;EACA,IAAIG,MAAM,IAAIC,QAAQ,IAAI,IAA1B,EAAgC;;IAE9BJ,GAAG,GAAGI,QAAQ,CAAC,CAAD,CAAd,CAF8B;;;EAKhC,OAAO;IACLJ,GAAG,EAAE,CAACC,QAAD,GAAYH,KAAK,CAAC,CAAD,CAAjB,GAAuB,IADvB;IAELO,IAAI,EAAEP,KAAK,CAAC,CAAD,CAAL,IAAYT;GAFpB;AAID;;AAED,MAAMiB,OAAO,GACX,2GADF;AAEA,MAAMC,WAAW,GAAG,+CAApB;;AAEA,SAASd,UAAT,CAAoBF,IAApB;EACE,MAAMO,KAAK,GAAGQ,OAAO,CAACP,IAAR,CAAaR,IAAb,CAAd;;EAEA,IAAI,CAACO,KAAL,EAAY;IACV,OAAO,IAAP;;;EAGF,IAAIE,GAAG,GAAGF,KAAK,CAAC,CAAD,CAAf;EACA,MAAMK,MAAM,GAAGH,GAAG,IAAIA,GAAG,CAACE,OAAJ,CAAY,SAAZ,IAAyB,CAAC,CAAhD;EAEA,MAAME,QAAQ,GAAGG,WAAW,CAACR,IAAZ,CAAiBC,GAAjB,CAAjB;;EACA,IAAIG,MAAM,IAAIC,QAAQ,IAAI,IAA1B,EAAgC;;IAE9BJ,GAAG,GAAGI,QAAQ,CAAC,CAAD,CAAd;;;EAGF,OAAO;IACLJ,GAAG,EAAEF,KAAK,CAAC,CAAD,CADL;IAELO,IAAI,EAAEP,KAAK,CAAC,CAAD,CAAL,IAAYT;GAFpB;AAID;;AAED,MAAMmB,gBAAgB,GAAG,6CAAzB;;AAEA,SAASd,QAAT,CAAkBH,IAAlB;EACE,MAAMO,KAAK,GAAGU,gBAAgB,CAACT,IAAjB,CAAsBR,IAAtB,CAAd;;EAEA,IAAI,CAACO,KAAL,EAAY;IACV,OAAO,IAAP;;;EAGF,OAAO;IACLE,GAAG,EAAEF,KAAK,CAAC,CAAD,CADL;IAELO,IAAI,EAAEP,KAAK,CAAC,CAAD,CAAL,IAAYT;GAFpB;AAID;;;;"}