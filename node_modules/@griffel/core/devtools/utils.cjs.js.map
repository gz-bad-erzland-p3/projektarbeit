{"version":3,"file":"utils.cjs.js","sources":["../../../../packages/core/src/devtools/utils.ts"],"sourcesContent":["import { CSSClasses, LookupItem } from '../types';\nimport { DebugAtomicClassName, DebugSequence } from './types';\n\nfunction getDirectionalClassName(classes: CSSClasses, direction: 'ltr' | 'rtl'): string {\n  return Array.isArray(classes) ? (direction === 'rtl' ? classes[1] : classes[0]) : classes;\n}\n\nexport function getDebugClassNames(\n  lookupItem: LookupItem,\n  parentLookupItem?: LookupItem,\n  parentDebugClassNames?: DebugAtomicClassName[],\n  overridingSiblings?: DebugSequence[],\n): DebugAtomicClassName[] {\n  const classesMapping = lookupItem[0];\n  const direction = lookupItem[1];\n\n  return Object.entries(classesMapping).map(([propertyHash, classes]) => {\n    const className = getDirectionalClassName(classes, direction);\n\n    let overriddenBy: string | undefined;\n    if (parentDebugClassNames && parentLookupItem) {\n      const matching = parentDebugClassNames.find(({ className: parentClassName }) => parentClassName === className);\n\n      if (!matching && parentLookupItem[0][propertyHash]) {\n        // parent node does not have current className (style), but has current selector:\n        // style is overriden in current merging by another rule in sibling node\n        overriddenBy = getDirectionalClassName(parentLookupItem[0][propertyHash], parentLookupItem[1]);\n      } else if (matching && parentLookupItem[0][propertyHash]) {\n        // parent node has current className (style), and has current selector:\n        // case 1. style is not overriden during current merging; it may be overriden in higher level of merging\n        // case 2. style is overriden in current merging by exactly the same rule in sibling nodes\n        const siblingHasSameRule = overridingSiblings\n          ? overridingSiblings.filter(\n              ({ debugClassNames }) =>\n                debugClassNames.filter(({ className: siblingClassName }) => siblingClassName === className).length > 0,\n            ).length > 0\n          : false;\n        overriddenBy = siblingHasSameRule\n          ? matching.className // case 2\n          : matching.overriddenBy; // case 1\n      } else if (!matching && !parentLookupItem[0][propertyHash]) {\n        // parent node does not have current className (style), and does not have current selector:\n        // this case is not possible\n        overriddenBy = undefined;\n      } else if (matching && !parentLookupItem[0][propertyHash]) {\n        // parent node has current className (style), but does not have current selector:\n        // this case is not possible\n        overriddenBy = undefined;\n      }\n    }\n\n    return {\n      className,\n      overriddenBy,\n    };\n  });\n}\n"],"names":["getDirectionalClassName","classes","direction","Array","isArray","getDebugClassNames","lookupItem","parentLookupItem","parentDebugClassNames","overridingSiblings","classesMapping","Object","entries","map","propertyHash","className","overriddenBy","matching","find","parentClassName","siblingHasSameRule","filter","debugClassNames","siblingClassName","length","undefined"],"mappings":";;;;AAGA,SAASA,uBAAT,CAAiCC,OAAjC,EAAsDC,SAAtD;EACE,OAAOC,KAAK,CAACC,OAAN,CAAcH,OAAd,IAA0BC,SAAS,KAAK,KAAd,GAAsBD,OAAO,CAAC,CAAD,CAA7B,GAAmCA,OAAO,CAAC,CAAD,CAApE,GAA2EA,OAAlF;AACD;;SAEeI,mBACdC,YACAC,kBACAC,uBACAC;EAEA,MAAMC,cAAc,GAAGJ,UAAU,CAAC,CAAD,CAAjC;EACA,MAAMJ,SAAS,GAAGI,UAAU,CAAC,CAAD,CAA5B;EAEA,OAAOK,MAAM,CAACC,OAAP,CAAeF,cAAf,EAA+BG,GAA/B,CAAmC,CAAC,CAACC,YAAD,EAAeb,OAAf,CAAD;IACxC,MAAMc,SAAS,GAAGf,uBAAuB,CAACC,OAAD,EAAUC,SAAV,CAAzC;IAEA,IAAIc,YAAJ;;IACA,IAAIR,qBAAqB,IAAID,gBAA7B,EAA+C;MAC7C,MAAMU,QAAQ,GAAGT,qBAAqB,CAACU,IAAtB,CAA2B,CAAC;QAAEH,SAAS,EAAEI;OAAd,KAAoCA,eAAe,KAAKJ,SAAnF,CAAjB;;MAEA,IAAI,CAACE,QAAD,IAAaV,gBAAgB,CAAC,CAAD,CAAhB,CAAoBO,YAApB,CAAjB,EAAoD;;;QAGlDE,YAAY,GAAGhB,uBAAuB,CAACO,gBAAgB,CAAC,CAAD,CAAhB,CAAoBO,YAApB,CAAD,EAAoCP,gBAAgB,CAAC,CAAD,CAApD,CAAtC;OAHF,MAIO,IAAIU,QAAQ,IAAIV,gBAAgB,CAAC,CAAD,CAAhB,CAAoBO,YAApB,CAAhB,EAAmD;;;;QAIxD,MAAMM,kBAAkB,GAAGX,kBAAkB,GACzCA,kBAAkB,CAACY,MAAnB,CACE,CAAC;UAAEC;SAAH,KACEA,eAAe,CAACD,MAAhB,CAAuB,CAAC;UAAEN,SAAS,EAAEQ;SAAd,KAAqCA,gBAAgB,KAAKR,SAAjF,EAA4FS,MAA5F,GAAqG,CAFzG,EAGEA,MAHF,GAGW,CAJ8B,GAKzC,KALJ;QAMAR,YAAY,GAAGI,kBAAkB,GAC7BH,QAAQ,CAACF,SADoB;UAE7BE,QAAQ,CAACD,YAFb,CAVwD;OAAnD,MAaA,IAAI,CAACC,QAAD,IAAa,CAACV,gBAAgB,CAAC,CAAD,CAAhB,CAAoBO,YAApB,CAAlB,EAAqD;;;QAG1DE,YAAY,GAAGS,SAAf;OAHK,MAIA,IAAIR,QAAQ,IAAI,CAACV,gBAAgB,CAAC,CAAD,CAAhB,CAAoBO,YAApB,CAAjB,EAAoD;;;QAGzDE,YAAY,GAAGS,SAAf;;;;IAIJ,OAAO;MACLV,SADK;MAELC;KAFF;GAnCK,CAAP;AAwCD;;;;"}