{"version":3,"file":"flex.cjs.js","sources":["../../../../packages/core/src/shorthands/flex.ts"],"sourcesContent":["import * as CSS from 'csstype';\nimport type { GriffelStylesStrictCSSObject } from '../types';\nimport { FlexInput } from './types';\n\ntype FlexStyle = Pick<GriffelStylesStrictCSSObject, 'flexGrow' | 'flexShrink' | 'flexBasis'>;\n\nconst isUnit = (value: CSS.Property.Flex | undefined) => typeof value === 'string' && /(\\d+(\\w+|%))/.test(value);\n\nconst isUnitless = (value: CSS.Property.Flex | undefined) => typeof value === 'number' && !Number.isNaN(value);\n\nconst isInitial = (value: CSS.Property.Flex | undefined) => value === 'initial';\n\nconst isAuto = (value: CSS.Property.Flex | undefined) => value === 'auto';\n\nconst isNone = (value: CSS.Property.Flex | undefined) => value === 'none';\n\nconst widthReservedKeys = ['content', 'fit-content', 'max-content', 'min-content'] as const;\ntype ReservedKeys = typeof widthReservedKeys[number];\ntype Width = ReservedKeys | string;\nconst isWidth = (value: CSS.Property.Flex | undefined) => widthReservedKeys.some(key => value === key) || isUnit(value);\n\n/**\n * A function that implements CSS spec conformant expansion for \"flex\".\n *\n * @example\n *   flex('auto')\n *   flex(1, '2.5rem')\n *   flex(0, 0, 'auto')\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/flex\n */\nexport function flex(...values: FlexInput): FlexStyle {\n  const isOneValueSyntax = values.length === 1;\n  const isTwoValueSyntax = values.length === 2;\n  const isThreeValueSyntax = values.length === 3;\n\n  if (isOneValueSyntax) {\n    const [firstValue] = values;\n\n    if (isInitial(firstValue)) {\n      return {\n        flexGrow: 0,\n        flexShrink: 1,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isAuto(firstValue)) {\n      return {\n        flexGrow: 1,\n        flexShrink: 1,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isNone(firstValue)) {\n      return {\n        flexGrow: 0,\n        flexShrink: 0,\n        flexBasis: 'auto',\n      };\n    }\n\n    if (isUnitless(firstValue)) {\n      return {\n        flexGrow: firstValue as number,\n        flexShrink: 1,\n        flexBasis: 0,\n      };\n    }\n\n    if (isWidth(firstValue)) {\n      return {\n        flexGrow: 1,\n        flexShrink: 1,\n        flexBasis: firstValue as Width,\n      };\n    }\n  }\n\n  if (isTwoValueSyntax) {\n    const [firstValue, secondValue] = values;\n\n    if (isUnitless(secondValue)) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: secondValue,\n        flexBasis: 0,\n      };\n    }\n\n    if (isWidth(secondValue)) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: 1,\n        flexBasis: secondValue as Width,\n      };\n    }\n  }\n\n  if (isThreeValueSyntax) {\n    const [firstValue, secondValue, thirdValue] = values;\n\n    if (isUnitless(firstValue) && isUnitless(secondValue) && (isAuto(thirdValue) || isWidth(thirdValue))) {\n      return {\n        flexGrow: firstValue,\n        flexShrink: secondValue,\n        flexBasis: thirdValue as Width,\n      };\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line no-console\n    console.error(\n      `The value passed to shorthands.flex did not match any flex property specs. The CSS styles were not generated. Please, check the flex documentation.`,\n    );\n  }\n  return {};\n}\n"],"names":["isUnit","value","test","isUnitless","Number","isNaN","isInitial","isAuto","isNone","widthReservedKeys","isWidth","some","key","flex","values","isOneValueSyntax","length","isTwoValueSyntax","isThreeValueSyntax","firstValue","flexGrow","flexShrink","flexBasis","secondValue","thirdValue","process","env","NODE_ENV","console","error"],"mappings":";;;;AAMA,MAAMA,MAAM,GAAIC,KAAD,IAA0C,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,eAAeC,IAAf,CAAoBD,KAApB,CAAtF;;AAEA,MAAME,UAAU,GAAIF,KAAD,IAA0C,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,CAACG,MAAM,CAACC,KAAP,CAAaJ,KAAb,CAA3F;;AAEA,MAAMK,SAAS,GAAIL,KAAD,IAA0CA,KAAK,KAAK,SAAtE;;AAEA,MAAMM,MAAM,GAAIN,KAAD,IAA0CA,KAAK,KAAK,MAAnE;;AAEA,MAAMO,MAAM,GAAIP,KAAD,IAA0CA,KAAK,KAAK,MAAnE;;AAEA,MAAMQ,iBAAiB,GAAG,CAAC,SAAD,EAAY,aAAZ,EAA2B,aAA3B,EAA0C,aAA1C,CAA1B;;AAGA,MAAMC,OAAO,GAAIT,KAAD,IAA0CQ,iBAAiB,CAACE,IAAlB,CAAuBC,GAAG,IAAIX,KAAK,KAAKW,GAAxC,KAAgDZ,MAAM,CAACC,KAAD,CAAhH;AAEA;;;;;;;;;;;;SAUgBY,KAAK,GAAGC;EACtB,MAAMC,gBAAgB,GAAGD,MAAM,CAACE,MAAP,KAAkB,CAA3C;EACA,MAAMC,gBAAgB,GAAGH,MAAM,CAACE,MAAP,KAAkB,CAA3C;EACA,MAAME,kBAAkB,GAAGJ,MAAM,CAACE,MAAP,KAAkB,CAA7C;;EAEA,IAAID,gBAAJ,EAAsB;IACpB,MAAM,CAACI,UAAD,IAAeL,MAArB;;IAEA,IAAIR,SAAS,CAACa,UAAD,CAAb,EAA2B;MACzB,OAAO;QACLC,QAAQ,EAAE,CADL;QAELC,UAAU,EAAE,CAFP;QAGLC,SAAS,EAAE;OAHb;;;IAOF,IAAIf,MAAM,CAACY,UAAD,CAAV,EAAwB;MACtB,OAAO;QACLC,QAAQ,EAAE,CADL;QAELC,UAAU,EAAE,CAFP;QAGLC,SAAS,EAAE;OAHb;;;IAOF,IAAId,MAAM,CAACW,UAAD,CAAV,EAAwB;MACtB,OAAO;QACLC,QAAQ,EAAE,CADL;QAELC,UAAU,EAAE,CAFP;QAGLC,SAAS,EAAE;OAHb;;;IAOF,IAAInB,UAAU,CAACgB,UAAD,CAAd,EAA4B;MAC1B,OAAO;QACLC,QAAQ,EAAED,UADL;QAELE,UAAU,EAAE,CAFP;QAGLC,SAAS,EAAE;OAHb;;;IAOF,IAAIZ,OAAO,CAACS,UAAD,CAAX,EAAyB;MACvB,OAAO;QACLC,QAAQ,EAAE,CADL;QAELC,UAAU,EAAE,CAFP;QAGLC,SAAS,EAAEH;OAHb;;;;EAQJ,IAAIF,gBAAJ,EAAsB;IACpB,MAAM,CAACE,UAAD,EAAaI,WAAb,IAA4BT,MAAlC;;IAEA,IAAIX,UAAU,CAACoB,WAAD,CAAd,EAA6B;MAC3B,OAAO;QACLH,QAAQ,EAAED,UADL;QAELE,UAAU,EAAEE,WAFP;QAGLD,SAAS,EAAE;OAHb;;;IAOF,IAAIZ,OAAO,CAACa,WAAD,CAAX,EAA0B;MACxB,OAAO;QACLH,QAAQ,EAAED,UADL;QAELE,UAAU,EAAE,CAFP;QAGLC,SAAS,EAAEC;OAHb;;;;EAQJ,IAAIL,kBAAJ,EAAwB;IACtB,MAAM,CAACC,UAAD,EAAaI,WAAb,EAA0BC,UAA1B,IAAwCV,MAA9C;;IAEA,IAAIX,UAAU,CAACgB,UAAD,CAAV,IAA0BhB,UAAU,CAACoB,WAAD,CAApC,KAAsDhB,MAAM,CAACiB,UAAD,CAAN,IAAsBd,OAAO,CAACc,UAAD,CAAnF,CAAJ,EAAsG;MACpG,OAAO;QACLJ,QAAQ,EAAED,UADL;QAELE,UAAU,EAAEE,WAFP;QAGLD,SAAS,EAAEE;OAHb;;;;EAQJ,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;;IAEzCC,OAAO,CAACC,KAAR,sJAAA;;;EAIF,OAAO,EAAP;AACD;;;;"}