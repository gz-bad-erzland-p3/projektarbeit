{"version":3,"file":"renderToStyleElements.esm.js","sources":["../../../packages/react/src/renderToStyleElements.ts"],"sourcesContent":["import { styleBucketOrdering } from '@griffel/core';\nimport * as React from 'react';\nimport type { GriffelRenderer } from '@griffel/core';\n\n/**\n * This method returns a list of <style> React elements with the rendered CSS. This is useful for Server-Side rendering.\n *\n * @public\n */\nexport function renderToStyleElements(renderer: GriffelRenderer): React.ReactElement[] {\n  const stylesheets = Object.values(renderer.stylesheets)\n    // first sort: bucket names\n    .sort((a, b) => {\n      return styleBucketOrdering.indexOf(a.bucketName) - styleBucketOrdering.indexOf(b.bucketName);\n    })\n    // second sort: media queries\n    .sort((a, b) => {\n      const mediaA = a.elementAttributes['media'];\n      const mediaB = b.elementAttributes['media'];\n\n      if (mediaA && mediaB) {\n        return renderer.compareMediaQueries(mediaA, mediaB);\n      }\n\n      if (mediaA || mediaB) {\n        return mediaA ? 1 : -1;\n      }\n\n      return 0;\n    });\n\n  return stylesheets\n    .map(stylesheet => {\n      const cssRules = stylesheet.cssRules();\n      // don't want to create any empty style elements\n      if (!cssRules.length) {\n        return null;\n      }\n\n      return React.createElement('style', {\n        key: stylesheet.bucketName,\n\n        // TODO: support \"nonce\"\n        // ...renderer.styleNodeAttributes,\n        ...stylesheet.elementAttributes,\n        'data-make-styles-rehydration': 'true',\n\n        dangerouslySetInnerHTML: {\n          __html: cssRules.join(''),\n        },\n      });\n    })\n    .filter(Boolean) as React.ReactElement[];\n}\n"],"names":["renderToStyleElements","renderer","stylesheets","Object","values","sort","a","b","styleBucketOrdering","indexOf","bucketName","mediaA","elementAttributes","mediaB","compareMediaQueries","map","stylesheet","cssRules","length","React","createElement","key","dangerouslySetInnerHTML","__html","join","filter","Boolean"],"mappings":";;;AAIA;;;;;;SAKgBA,sBAAsBC;EACpC,MAAMC,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAcH,QAAQ,CAACC,WAAvB;GAEjBG,IAFiB,CAEZ,CAACC,CAAD,EAAIC,CAAJ;IACJ,OAAOC,mBAAmB,CAACC,OAApB,CAA4BH,CAAC,CAACI,UAA9B,IAA4CF,mBAAmB,CAACC,OAApB,CAA4BF,CAAC,CAACG,UAA9B,CAAnD;GAHgB;GAMjBL,IANiB,CAMZ,CAACC,CAAD,EAAIC,CAAJ;IACJ,MAAMI,MAAM,GAAGL,CAAC,CAACM,iBAAF,CAAoB,OAApB,CAAf;IACA,MAAMC,MAAM,GAAGN,CAAC,CAACK,iBAAF,CAAoB,OAApB,CAAf;;IAEA,IAAID,MAAM,IAAIE,MAAd,EAAsB;MACpB,OAAOZ,QAAQ,CAACa,mBAAT,CAA6BH,MAA7B,EAAqCE,MAArC,CAAP;;;IAGF,IAAIF,MAAM,IAAIE,MAAd,EAAsB;MACpB,OAAOF,MAAM,GAAG,CAAH,GAAO,CAAC,CAArB;;;IAGF,OAAO,CAAP;GAlBgB,CAApB;EAqBA,OAAOT,WAAW,CACfa,GADI,CACAC,UAAU;IACb,MAAMC,QAAQ,GAAGD,UAAU,CAACC,QAAX,EAAjB;;IAEA,IAAI,CAACA,QAAQ,CAACC,MAAd,EAAsB;MACpB,OAAO,IAAP;;;IAGF,oBAAOC,KAAK,CAACC,aAAN,CAAoB,OAApB;MACLC,GAAG,EAAEL,UAAU,CAACN;OAIbM,UAAU,CAACJ;MACd,gCAAgC;MAEhCU,uBAAuB,EAAE;QACvBC,MAAM,EAAEN,QAAQ,CAACO,IAAT,CAAc,EAAd;;MATL,CAAP;GARG,EAqBJC,MArBI,CAqBGC,OArBH,CAAP;AAsBD;;;;"}